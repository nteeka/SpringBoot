<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Pro - Quแบฃn lรฝ sแบฃn phแบฉm | GreenLife</title>
    <link rel="stylesheet" th:href="@{/css/dashboard.css}" />
  </head>
  <body>
    <!-- Sidebar -->
    <div th:replace="Page/Admin/sidebarAdmin :: sidebarAdmin"></div>


    <!-- Main Content -->
    <div class="main-content">
      <!-- Header -->
      <div class="header">
        <h1>๐ฆ Quแบฃn lรฝ sแบฃn phแบฉm Pro</h1>
        <div class="user-info">
          <div>
            <div style="font-weight: 600">Admin User</div>
            <div style="font-size: 0.85rem; color: #636e72">
              admin@greenlife.vn
            </div>
          </div>
          <div class="user-avatar">A</div>
        </div>
      </div>

      <!-- Stats -->
      <div class="stats-grid">
        <div class="stat-card" onclick="filterByStatus('all')">
          <div class="stat-icon blue">๐ผ</div>
          <div class="stat-info">
            <h3 id="totalProducts">12</h3>
            <p>Tแปng sแบฃn phแบฉm</p>
          </div>
        </div>
        <div class="stat-card" onclick="filterByStatus('active')">
          <div class="stat-icon green">โ</div>
          <div class="stat-info">
            <h3 id="activeProducts">10</h3>
            <p>ฤang bรกn</p>
          </div>
        </div>
        <div class="stat-card" onclick="filterByStock('low')">
          <div class="stat-icon orange">๐</div>
          <div class="stat-info">
            <h3 id="lowStockProducts">3</h3>
            <p>Sแบฏp hแบฟt hรng</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon purple">๐ฐ</div>
          <div class="stat-info">
            <h3 id="totalValue">24.5M</h3>
            <p>Tแปng giรก trแป</p>
          </div>
        </div>
      </div>

      <!-- Actions Bar -->
      <div class="actions-bar">
        <div class="search-box">
          <span class="search-icon">๐</span>
          <input
            type="text"
            id="searchInput"
            placeholder="Tรฌm theo tรชn, SKU, danh mแปฅc..."
          />
        </div>
        <button class="btn btn-secondary" onclick="toggleAdvancedFilters()">
          ๐ง Lแปc nรขng cao
        </button>
        <button class="btn btn-primary" onclick="openModal('add')">
          โ Thรชm sแบฃn phแบฉm
        </button>
        <button class="btn btn-secondary" onclick="exportToExcel()">
          ๐ค Xuแบฅt Excel
        </button>
        <button class="btn btn-secondary" onclick="importFromExcel()">
          ๐ฅ Nhแบญp Excel
        </button>
      </div>

      <!-- Advanced Filters -->
      <!-- Advanced Filters Panel -->
<div class="advanced-filters" id="advancedFilters">
  <div class="filters-header">
    <h3>๐ Bแป lแปc nรขng cao</h3>
    <button class="btn-collapse" onclick="toggleAdvancedFilters()">
      <span id="collapseIcon">โผ</span>
    </button>
  </div>

  <div class="filters-body">
    <!-- Row 1: Price & Stock -->
    <div class="filter-section">
      <div class="section-title">๐ฐ Giรก & Tแปn kho</div>
      <div class="filter-row">
        <div class="filter-group">
          <label>Giรก tแปซ (VNฤ)</label>
          <input 
            type="number" 
            id="priceMin" 
            placeholder="0" 
            min="0"
            step="10000"
          />
        </div>
        <div class="filter-group">
          <label>Giรก ฤแบฟn (VNฤ)</label>
          <input 
            type="number" 
            id="priceMax" 
            placeholder="10,000,000" 
            min="0"
            step="10000"
          />
        </div>
        <div class="filter-group">
          <label>Mแปฉc tแปn kho</label>
          <select id="stockFilter" onchange="filterByStock(this.value)">
            <option value="">Tแบฅt cแบฃ</option>
            <option value="high">๐ข Cรฒn nhiแปu (>50)</option>
            <option value="medium">๐ก Cรฒn รญt (10-50)</option>
            <option value="low">๐ด Sแบฏp hแบฟt (<10)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Row 2: Categories & Style -->
    <div class="filter-section">
      <div class="section-title">๐ Danh mแปฅc & Phong cรกch</div>
      <div class="filter-row">
        <div class="filter-group">
          <label>Danh mแปฅc</label>
          <select id="categoryFilter">
            <option value="">Tแบฅt cแบฃ</option>
            <option value="valentine">๐ Valentine</option>
            <option value="sinh-nhat">๐ Sinh nhแบญt</option>
            <option value="cuoi">๐ Cฦฐแปi hแปi</option>
            <option value="tet">๐งง Tแบฟt</option>
            <option value="khai-truong">๐ Khai trฦฐฦกng</option>
            <option value="phong-thuy">โ๏ธ Phong thแปงy</option>
            <option value="ky-niem">๐ Kแปท niแปm</option>
            <option value="tham-benh">๐ฅ Thฤm bแปnh</option>
            <option value="ngay-me">๐ธ Ngรy cแปงa mแบน</option>
            <option value="tot-nghiep">๐ Tแปt nghiแปp</option>
            <option value="de-ban">๐ชด ฤแป bรn</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Phong cรกch</label>
          <select id="styleFilter">
            <option value="">Tแบฅt cแบฃ</option>
            <option value="sang-trong">๐ Sang trแปng</option>
            <option value="vintage">๐ฐ๏ธ Vintage</option>
            <option value="hien-dai">โจ Hiแปn ฤแบกi</option>
            <option value="rustic">๐ฟ Rustic</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Trแบกng thรกi</label>
          <select id="statusFilterSelect" onchange="filterByStatus(this.value)">
            <option value="all">Tแบฅt cแบฃ</option>
            <option value="active">โ ฤang bรกn</option>
            <option value="inactive">โธ๏ธ Tแบกm ngฦฐng</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Row 3: Sort Options -->
    <div class="filter-section">
      <div class="section-title">โฌ๏ธ Sแบฏp xแบฟp</div>
      <div class="filter-row">
        <div class="filter-group full-width">
          <label>Sแบฏp xแบฟp theo</label>
          <div class="sort-options">
            <button class="sort-btn" onclick="applySortFilter('name-asc')">
              ๐ Tรชn AโZ
            </button>
            <button class="sort-btn" onclick="applySortFilter('name-desc')">
              ๐ Tรชn ZโA
            </button>
            <button class="sort-btn" onclick="applySortFilter('price-asc')">
              ๐ต Giรก thแบฅpโcao
            </button>
            <button class="sort-btn" onclick="applySortFilter('price-desc')">
              ๐ต Giรก caoโthแบฅp
            </button>
            <button class="sort-btn" onclick="applySortFilter('stock-asc')">
              ๐ฆ Tแปn kho tฤng
            </button>
            <button class="sort-btn" onclick="applySortFilter('stock-desc')">
              ๐ฆ Tแปn kho giแบฃm
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="filters-actions">
      <button class="btn btn-secondary" onclick="clearFilters()">
        ๐๏ธ Xรณa bแป lแปc
      </button>
      <button class="btn btn-primary" onclick="applyFilters()">
        โ รp dแปฅng bแป lแปc
      </button>
    </div>
  </div>
</div>

      <!-- Filter Tabs -->
      <div class="filter-tabs">
        <div
          class="filter-tab active"
          data-filter="all"
          onclick="setTypeFilter('all')"
        >
          Tแบฅt cแบฃ
        </div>
        <div
          class="filter-tab"
          data-filter="hoa"
          onclick="setTypeFilter('hoa')"
        >
          ๐ผ Hoa
        </div>
        <div
          class="filter-tab"
          data-filter="cay"
          onclick="setTypeFilter('cay')"
        >
          ๐ฟ Cรขy cแบฃnh
        </div>
        <div
          class="filter-tab"
          data-filter="phukien"
          onclick="setTypeFilter('phukien')"
        >
          ๐ Phแปฅ kiแปn
        </div>
      </div>

      <!-- Table Header with Bulk Actions -->
      <div class="table-header">
        <div class="bulk-actions">
          <input type="checkbox" id="selectAll" onchange="toggleSelectAll()" />
          <span id="selectedCount">0 ฤรฃ chแปn</span>
          <button
            class="btn btn-danger"
            id="bulkDeleteBtn"
            onclick="bulkDelete()"
            style="display: none"
          >
            ๐๏ธ Xรณa ฤรฃ chแปn
          </button>
          <button
            class="btn btn-secondary"
            id="bulkStatusBtn"
            onclick="bulkUpdateStatus()"
            style="display: none"
          >
            โก Cแบญp nhแบญt trแบกng thรกi
          </button>
        </div>
        <div style="font-weight: 600; color: #636e72">
          Hiแปn thแป <span id="displayCount">12</span> sแบฃn phแบฉm
        </div>
      </div>

      <!-- Products Table -->
      <div class="products-table">
        <table>
          <thead>
            <tr>
              <th class="checkbox-cell"></th>
              <th>Hรฌnh แบฃnh</th>
              <th class="sortable" onclick="sortTable('name')">Tรชn sแบฃn phแบฉm</th>
              <th class="sortable" onclick="sortTable('type')">Loแบกi</th>
              <th class="sortable" onclick="sortTable('price')">Giรก</th>
              <th class="sortable" onclick="sortTable('stock')">Tแปn kho</th>
              <th>Danh mแปฅc</th>
              <th>Trแบกng thรกi</th>
              <th>Thao tรกc</th>
            </tr>
          </thead>
          <tbody id="productsTableBody">
            <!-- Render by JS -->
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div class="pagination">
        <div class="pagination-info">
          Hiแปn thแป <span id="pageInfo">1-10 cแปงa 12</span> sแบฃn phแบฉm
        </div>
        <div class="pagination-btns">
          <button
            class="page-btn"
            id="prevBtn"
            onclick="changePage(-1)"
            disabled
          >
            โ Trฦฐแปc
          </button>
          <div id="pageNumbers"></div>
          <button class="page-btn" id="nextBtn" onclick="changePage(1)">
            Sau โ
          </button>
        </div>
      </div>
    </div>

    <!-- Modal Add/Edit Product -->
    <div class="modal" id="productModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Thรชm sแบฃn phแบฉm mแปi</h2>
          <button class="close-btn" onclick="closeModal()">โ</button>
        </div>
        <form id="productForm">
          <input type="hidden" id="productId" />

          <div class="form-grid">
            <div class="form-group">
              <label>Tรชn sแบฃn phแบฉm *</label>
              <input
                type="text"
                id="productName"
                required
                placeholder="VD: Hoa Hแปng ฤแป"
              />
            </div>

            <div class="form-group">
              <label>Mรฃ SKU *</label>
              <input
                type="text"
                id="productSku"
                required
                placeholder="VD: HOA-001"
              />
            </div>

            <div class="form-group">
              <label>Giรก (VNฤ) *</label>
              <input
                type="number"
                id="productPrice"
                required
                placeholder="450000"
              />
            </div>

            <div class="form-group">
              <label>Tแปn kho *</label>
              <input
                type="number"
                id="productStock"
                required
                placeholder="50"
              />
            </div>

            <div class="form-group">
              <label>Loแบกi sแบฃn phแบฉm *</label>
              <select id="productType" required>
                <option value="">-- Chแปn loแบกi --</option>
                <option value="hoa">๐ผ Hoa</option>
                <option value="cay">๐ฟ Cรขy cแบฃnh</option>
                <option value="phukien">๐ Phแปฅ kiแปn</option>
              </select>
            </div>

            <div class="form-group">
              <label>Danh mแปฅc *</label>
              <select id="productCategory" required>
                <option value="">-- Chแปn danh mแปฅc --</option>
                <option value="valentine">๐ Valentine</option>
                <option value="sinh-nhat">๐ Sinh nhแบญt</option>
                <option value="cuoi">๐ Cฦฐแปi hแปi</option>
                <option value="tet">๐งง Tแบฟt</option>
                <option value="khai-truong">๐ Khai trฦฐฦกng</option>
                <option value="phong-thuy">โ๏ธ Phong thแปงy</option>
                <option value="ky-niem">๐ Kแปท niแปm</option>
                <option value="tham-benh">๐ฅ Thฤm bแปnh</option>
              </select>
            </div>

            <div class="form-group">
              <label>Phong cรกch *</label>
              <select id="productStyle" required>
                <option value="">-- Chแปn phong cรกch --</option>
                <option value="sang-trong">๐ Sang trแปng</option>
                <option value="vintage">๐ฐ๏ธ Vintage</option>
                <option value="hien-dai">โจ Hiแปn ฤแบกi</option>
                <option value="rustic">๐ฟ Rustic</option>
              </select>
            </div>

            <div class="form-group">
              <label>Trแบกng thรกi</label>
              <select id="productStatus">
                <option value="active">โ ฤang bรกn</option>
                <option value="inactive">โ Tแบกm ngฦฐng</option>
              </select>
            </div>

            <!-- <div class="form-group full-width">
              <label>URL Hรฌnh แบฃnh *</label>
              <input
                type="url"
                id="productImg"
                required
                placeholder="https://images.unsplash.com/..."
                onchange="previewImage()"
              />
              <img id="imagePreview" class="image-preview" alt="Preview" />
            </div> -->
            <div class="form-group full-width">
              <label>Hรฌnh แบฃnh sแบฃn phแบฉm *</label>

              <!-- Lแปฑa chแปn phฦฐฦกng thแปฉc tแบฃi แบฃnh -->
              <div class="image-option">
                <div
                  class="image-option-btn active"
                  id="optionUpload"
                  onclick="selectImageOption('upload')"
                >
                  ๐ค Upload แบฃnh
                </div>
                <div
                  class="image-option-btn"
                  id="optionUrl"
                  onclick="selectImageOption('url')"
                >
                  ๐ Dรกn URL แบฃnh
                </div>
              </div>

              <!-- Upload file -->
              <div id="uploadContainer">
                <input
                  type="file"
                  id="productImgUpload"
                  accept="image/*"
                  onchange="handleImageUpload(event)"
                />
              </div>

              <!-- Nhแบญp URL -->
              <div id="urlContainer" style="display: none">
                <input
                  type="url"
                  id="productImg"
                  placeholder="https://images.unsplash.com/..."
                  onchange="previewImage()"
                />
              </div>

              <!-- Preview + nรบt xรณa -->
              <div
                id="previewContainer"
                style="margin-top: 0.8rem; text-align: center"
              >
                <img id="imagePreview" class="image-preview" alt="Preview" />
                <button
                  type="button"
                  id="removeImageBtn"
                  class="btn-remove-image"
                  style="display: none"
                  onclick="removeImage()"
                >
                  ๐๏ธ Xรณa แบฃnh
                </button>
              </div>
            </div>
            <div class="form-group full-width">
              <label>Mรด tแบฃ sแบฃn phแบฉm</label>
              <textarea
                id="productDescription"
                placeholder="Nhแบญp mรด tแบฃ chi tiแบฟt vแป sแบฃn phแบฉm..."
              ></textarea>
            </div>
          </div>

          <div class="form-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeModal()"
            >
              Hแปงy
            </button>
            <button type="submit" class="btn btn-primary">
              ๐พ Lฦฐu sแบฃn phแบฉm
            </button>
          </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <span id="toastIcon">โ</span>
      <span id="toastMessage">Thao tรกc thรnh cรดng!</span>
    </div>

    <script th:src="@{/js/dashboard.js}" defer></script>

  </body>
</html>
